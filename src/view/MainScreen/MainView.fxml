<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<StackPane xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="view.MainScreen.MainController"
           prefWidth="1000" prefHeight="600" styleClass="root">

    <!-- Lớp nền BorderPane chính -->
    <BorderPane fx:id="mainBorderPane" prefWidth="1000" prefHeight="600">

        <!-- PHẦN TRUNG TÂM -->
        <center>
            <VBox spacing="10.0" styleClass="left-pane" BorderPane.alignment="CENTER">
                <padding>
                    <Insets top="10" right="10" bottom="10" left="10"/>
                </padding>

                <!-- Search & Filter -->
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <TextField fx:id="searchField" prefHeight="40" prefWidth="258"
                               promptText="Tìm món theo tên..." styleClass="search-bar"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button onAction="#filterAll" styleClass="filter-btn" text="Tất cả"/>
                    <Button onAction="#filterDrink" styleClass="filter-btn" text="Đồ uống"/>
                    <Button onAction="#filterFood" styleClass="filter-btn" text="Đồ ăn"/>
                </HBox>

                <!-- Danh sách món -->
                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
                    <content>
                        <FlowPane fx:id="menuGrid" hgap="15" vgap="15" styleClass="menu-grid">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                        </FlowPane>
                    </content>
                </ScrollPane>
            </VBox>
        </center>

        <!-- PHẦN CART/ORDER BÊN PHẢI -->
        <right>
            <VBox prefWidth="350" spacing="10" styleClass="right-pane" BorderPane.alignment="CENTER">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>

                <Label styleClass="section-title" text="Đơn hàng hiện tại"/>

                <!-- Order Table -->
                <TableView fx:id="orderTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colName" prefWidth="140" text="Tên món"/>
                        <TableColumn fx:id="colQty" prefWidth="60" style="-fx-alignment: CENTER;" text="SL"/>
                        <TableColumn fx:id="colTotal" prefWidth="100" style="-fx-alignment: CENTER-RIGHT;" text="Thành tiền"/>
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>

                <!-- Quick action buttons -->
                <HBox alignment="CENTER" spacing="10">
                    <Button onAction="#handleDecreaseQty" styleClass="qty-btn" text="-"/>
                    <Button onAction="#handleIncreaseQty" styleClass="qty-btn" text="+"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button onAction="#handleRemoveItem" styleClass="danger-btn" text="Xóa món"/>
                </HBox>

                <!-- Tổng cộng -->
                <VBox spacing="5" styleClass="total-section">
                    <HBox>
                        <Label text="Tổng cộng:"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="totalLabel" styleClass="total-price" text="0 đ"/>
                    </HBox>
                    <Button maxWidth="Infinity" onAction="#handleApplyDiscount"
                            styleClass="discount-btn" text="Áp dụng mã giảm giá"/>
                </VBox>

                <!-- Thanh toán -->
                <Button maxWidth="Infinity" prefHeight="50"
                        onAction="#handleCheckout" styleClass="checkout-btn" text="THANH TOÁN"/>
            </VBox>
        </right>

    </BorderPane>
    <!-- VBOX MENU TRƯỢT ẨN -->
    <VBox fx:id="slideMenu" styleClass="menu-list-vbox" StackPane.alignment="BOTTOM_LEFT" translateX="-220">
        <Button text="Menu Item 1" styleClass="menu-item"/>
        <Button text="Menu Item 2" styleClass="menu-item"/>
        <Button text="Menu Item 3" styleClass="menu-item"/>
        <Button text="Menu Item 4" styleClass="menu-item"/>
        <Button text="Menu Item 5" styleClass="menu-item"/>
    </VBox>
    <!-- NÚT HAMBURGER GÓC DƯỚI BÊN TRÁI -->
    <Button fx:id="menuButton" text="☰" styleClass="menu-button"
            StackPane.alignment="BOTTOM_LEFT">
        <StackPane.margin>
            <Insets bottom="15" left="15"/>
        </StackPane.margin>
    </Button>

</StackPane>
