<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="view.MainScreen.MainController">

    <left>
        <VBox fx:id="sidebarBox" prefHeight="756.0" prefWidth="202.0" spacing="8.0" styleClass="sidebar" BorderPane.alignment="CENTER">
            <padding> <Insets bottom="20" left="15" right="15" top="20" /> </padding>
            <children>
                <Label maxWidth="Infinity" styleClass="app-logo" text="%menu.pos" />
                <Separator opacity="0.1" />
                <Region prefHeight="20.0" />

                <Button maxWidth="Infinity" styleClass="nav-btn, active-nav" text="%menu.sell" />
                <Button onAction="#menuManager" styleClass="nav-btn" text="%menu.manage" />
                <Button maxWidth="Infinity" onAction="#openSettings" styleClass="nav-btn" text="%menu.setting" />
                <Region VBox.vgrow="ALWAYS" />
                <Button maxWidth="Infinity" onAction="#logout" styleClass="nav-btn" text="%menu.logout" />
            </children>
        </VBox>
    </left>

    <center>
        <VBox prefHeight="756.0" prefWidth="692.0" spacing="20.0" styleClass="center-background">
            <padding> <Insets bottom="20" left="25" right="25" top="25" /> </padding>

            <HBox alignment="CENTER_LEFT">
                <VBox>
                    <Label style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2d3436;" text="%menu.title" />
                    <Label fx:id="dateLabel" style="-fx-text-fill: #9ca3af;" text="%menu.date" />
                </VBox>
                <Region HBox.hgrow="ALWAYS" />
                <TextField fx:id="searchField" prefHeight="45.0" prefWidth="300.0" promptText="%menu.search" styleClass="search-bar" />
            </HBox>

            <HBox spacing="15.0">
                <Button onAction="#filterAll" prefHeight="35" prefWidth="80" styleClass="filter-btn" text="%menu.filter.all" />
                <Button onAction="#filterDrink" prefHeight="35" prefWidth="90" styleClass="filter-btn" text="%menu.filter.drink" />
                <Button onAction="#filterFood" prefHeight="35" prefWidth="80" styleClass="filter-btn" text="%menu.filter.food" />
            </HBox>

            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent; -fx-background: transparent;" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
                <content>
                    <FlowPane fx:id="menuGrid" hgap="20" styleClass="menu-grid" vgap="20" />
                </content>
            </ScrollPane>
        </VBox>
    </center>

    <right>
        <VBox prefWidth="380.0" spacing="15.0" styleClass="right-pane-light">
            <padding> <Insets bottom="25" left="20" right="20" top="25" /> </padding>

            <Label styleClass="section-title" text="%menu.currento" />
            <Separator />

            <TableView fx:id="orderTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colName" prefWidth="160" text="%menu.dish" />
                    <TableColumn fx:id="colQty" prefWidth="50" style="-fx-alignment: CENTER;" text="SL" />
                    <TableColumn fx:id="colTotal" prefWidth="110" style="-fx-alignment: CENTER-RIGHT;" text="%menu.money" />
                </columns>
                <columnResizePolicy> <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /> </columnResizePolicy>
                <placeholder>
                    <VBox alignment="CENTER" spacing="10">
                        <Label style="-fx-font-size: 40px; -fx-text-fill: #CBD5E1;" text="☕" />
                        <Label style="-fx-text-fill: #94A3B8; -fx-font-size: 14px;" text="%menu.warning" />
                    </VBox>
                </placeholder>
            </TableView>

            <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0;">
                <Button onAction="#handleRemoveItem" styleClass="danger-btn" text="%menu.delete" />
                <Region HBox.hgrow="ALWAYS" />
                <Button onAction="#handleDecreaseQty" styleClass="qty-btn" text="-" />
                <Button onAction="#handleIncreaseQty" styleClass="qty-btn" text="+" />
            </HBox>

            <Separator />

            <VBox spacing="10">
                <HBox>
                    <Label styleClass="total-label" text="%menu.total01" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="subTotalLabel" styleClass="total-label" text="0 đ" />
                </HBox>
                <HBox>
                    <Label styleClass="total-label" text="%menu.giamgia" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label styleClass="total-label" text="0 đ" />
                </HBox>
                <HBox alignment="CENTER_LEFT">
                    <Label style="-fx-font-weight: bold; -fx-font-size: 16px;" text="%menu.total02" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Label fx:id="totalLabel" styleClass="total-price" text="0 đ" />
                </HBox>
            </VBox>

            <Button maxWidth="Infinity" onAction="#handleCheckout" prefHeight="55" styleClass="checkout-btn" text="%menu.pay" />
        </VBox>
    </right>

</BorderPane>